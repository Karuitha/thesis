"0","# Add the financial development index to the dataset"
"0","## Countries not part of Africa"
"0","mideast <- c(""Bahrain"", ""Iran, Islamic Rep."", ""Iraq"", ""Israel"", ""Jordan"", ""Kuwait"", ""Lebanon"", ""Malta"", ""Oman"", ""Qatar"", ""Saudi Arabia"", ""Syrian Arab Republic"", ""United Arab Emirates"", ""West Bank and Gaza"", ""Yemen, Rep."")"
"0",""
"0","## Load the financial structure data"
"0","finstr <- read_excel(""FinancialStructureDatabase20191018.xlsx"", sheet = 4) %>% "
"0","  "
"0","  ## Select desired variables"
"0","  select(country, region, year, pcrdbgdp, stmktcap, stvaltraded, stturnover, listco_pc) %>% "
"0","  "
"0","  ### Filter out regions not in Africa or middle east"
"0","  filter(region == ""Sub-Saharan Africa"" | region == ""Middle East & North Africa"") %>% "
"0","  ### Filter out countries in middle east and select year 1999 onwards"
"0","  filter(!country %in% mideast, year >= 1999) %>% "
"0","  "
"0","## Replace NAs"
"0","          group_by(country) %>% "
"0","  "
"0","          mutate(pcrdbgdp = replace_na(pcrdbgdp, median(pcrdbgdp, na.rm = TRUE)),"
"0","                 "
"0","                 pcrdbgdp = replace_na(pcrdbgdp, 0),"
"0","                 "
"0","                 stmktcap = replace_na(stmktcap, median(stmktcap, na.rm = TRUE)),"
"0","                 "
"0","                 stmktcap = replace_na(stmktcap, 0)) %>% ungroup() %>% "
"0","  "
"0","## Join with the bonds data"
"0","  left_join(bonds, by = c(""country"", ""year"")) %>% "
"0","  "
"0","## rename bonds columns "
"0","  rename(prbonds = outstanding_t_bonds_percent_gdp, "
"0","         "
"0","         pubonds = outstanding_c_bonds_percent_gdp) %>% "
"0","  "
"0","  ## Replace NAs in public bond and private bond markets "
"0","  mutate(pubonds = replace_na(pubonds, 0), "
"0","         "
"0","         prbonds = replace_na(prbonds, 0)) %>% "
"0","  "
"0","         ## Rename Ivory Coast"
"0","         mutate(country = if_else(country == ""CÃ´te d'Ivoire"", ""Cote d'Ivoire"", "
"0","                                  "
"0","                                  country))"
"0",""
"0","## View missing data points"
"0","#mice::md.pattern(finstr)"
"0",""
"0","#finstr %>% select(pcrdbgdp, stmktcap) %>% cor(.) %>% "
"0","  "
"0","  #corrplot(method = ""number"", type = ""lower"")"
